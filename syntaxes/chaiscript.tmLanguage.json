{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "ChaiScript",
	"patterns": [{
		"include": "#statements"
	}],
	"repository": {
		"keywords": {
			"patterns": [{
				"name": "keyword.control",
				"match": "\\b(try|catch|finally|if|else|while|for|case|default|switch|return|break|continue|attr|auto|var|global|this)\\b"
			}]
		},
		"statements": {
			"patterns": [{
				"include": "#strings"
			}, {
				"include": "#comments"
			}, {
				"include": "#keywords"
			}, {
				"include": "#constant"
			}, {
				"include": "#block"
			}, {
				"include": "#declaration"
			}, {
				"include": "#brace"
			}]
		},
		"constant": {
			"patterns": [{
				"name": "constant.language",
				"match": "\\b(true|false)\\b"
			}]
		},
		"declaration": {
			"patterns": [{
				"include": "#class-declaration"
			}, {
				"include": "#function-declaration"
			}, {
				"include": "#lambda-declaration"
			}]
		},
		"class-declaration": {
			"name": "meta.class",
			"begin": "\\b(class)\\b\\s*(\\S*)\\s*",
			"beginCaptures": {
				"1": {
					"name": "keyword"
				},
				"2": {
					"name": "entity.name.class.chaiscript"
				}
			},
			"end": "(?<=\\})",
			"patterns": [{
				"include": "#block"
			}]
		},
		"lambda-declaration": {
			"name": "meta.function",
			"begin": "\\b(fun\\b)\\s*\\(.*?\\)\\s*",
			"beginCaptures": {
				"1": {
					"name": "keyword"
				}
			},
			"end": "(?<=\\})",
			"patterns": [{
				"include": "#block"
			}]
		},
		"function-declaration": {
			"comment": "A nim procedure or method",
			"name": "meta.proc",
			"patterns": [{
				"begin": "\\b(def)\\s+\\`?([^\\:\\{\\s\\`\\*\\(]*)\\`?(\\s*\\*)?\\s*(\\(|\\=|:|\\[|\\n|\\{)",
				"captures": {
					"1": {
						"name": "keyword.other"
					},
					"2": {
						"name": "entity.name.function.chaiscript"
					},
					"3": {
						"name": "keyword.control.export"
					}
				},
				"end": "\\)",
				"patterns": [{
					"include": "#block"
				}]
			}]
		},
		"strings": {
			"name": "string.quoted.double",
			"begin": "\"",
			"end": "\"",
			"patterns": [{
				"name": "constant.character.escape",
				"match": "\\\\."
			}]
		},
		"comments": {
			"name": "comment",
			"patterns": [{
				"begin": "(^[ \\t]+)?((//)(?:\\s*((@)internal)(?=\\s|$))?)",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.comment.leading"
					},
					"2": {
						"name": "comment.line.double-slash"
					},
					"3": {
						"name": "punctuation.definition.comment"
					},
					"4": {
						"name": "storage.type.internaldeclaration"
					},
					"5": {
						"name": "punctuation.decorator.internaldeclaration"
					}
				},
				"end": "(?=^)",
				"contentName": "comment.line.double-slash"
			}, {
				"name": "comment.block",
				"begin": "/\\*",
				"end": "\\*/"
			}]
		},
		"block": {
			"name": "meta.block",
			"begin": "\\{",
			"beginCaptures": {
				"0": {
					"name": "punctuation.section.parens.begin.bracket.round"
				}
			},
			"end": "\\}",
			"endCaptures": {
				"0": {
					"name": "punctuation.section.parens.end.bracket.round"
				}
			},
			"patterns": [{
				"include": "#statements"
			}]
		}
	},
	"scopeName": "source.chai"
}